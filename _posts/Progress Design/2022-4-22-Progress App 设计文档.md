---
layout: post
title: Progress App 设计文档
image: algorithm/h2ud2gifwr/cover.jpg
date: 2022-4-21 9:39:00 +0400
tags: 
categories: 
subTitle: 数字化时代为我们提供了非常简单的方式来访问大量的开源数据以丰富的信息，这是前所未有的。这对于整合、分析数据并生成预测的数据团队来说是一个潜在金矿，会给任何组织带来相当显著的价值。
show: 0
---

## 1. 项目背景

从 Habit 的数据表现来看，数据记录监控类的工具应用依然有较大的潜力，目前市面上的数据统计应用都有各自的优劣势。

- 如类 Habit 应用：

    优势：操作简单，目标性强

    劣势：可统计数据简单，统计项固定，有数据统计却无分析

- 如类 Excel 应用：

    优势：灵活性强，功能强大，可嵌入各种图表

    劣势：使用复杂，移动设备不易操作，有数据统计却无分析

按照以上简单分析，我希望能实现一款：操作简单、统计项目灵活、有数据统计、有**数据分析**的应用。

1. 操作简单：移动项目，操作复杂会劝退非常多的人。因此操作简单是基本要求，这里有两个点，第一就是设计要清晰，工具类应用设计还是以数据为先，可以有精心的细节设计，但是不能影响阅读和操作数据。第二就是操作链不宜过长，太长的操作链会让小白用户放弃使用。因此这两个的平衡非常重要。
2. 统计项目灵活：不能拘泥于固定的统计形式，需要用户可自定义的统计样式，无论是文本、分类、计数、数字、时间、时间区间，都允许用户自己添加删除项目。当然这就难免与第 1 条原则相违背，因此需要项目开发和设计人员预制统计项目，将日常大量使用的统计项目预先配置在应用中，让用户可以直接跳过配置阶段开始使用统计。
3. 有数据统计：市面上的数据相关应用的数据统计内容都必须包含，例如：总量、平均量、中位数等。还必须允许用户对不同的分类进行筛选查看相关数据。让用户有成就感。图表也是数据统计查看的一部分，基础的直方图、折线图、扇形图等都必须包含并且供用户灵活调用，来自己分析基础数据。
4. 有数据分析：看了市面上大部分应用，有数据分析的非常少，能直接根据数据给出结果的例如苹果的 Apple Watch 收集到的健康数据，会根据数据从专业角度给出危险提醒或报警的应用非常少。因此数据分析可能会成为此项目的核心功能与技术壁垒。这需要产品规划、技术人员具有相关知识如：统计学，高等数学，基础 AI 算法。归纳出常用的数据分析归类方法，并进行代码化，允许用户根据自己创建的数据统计项目来进行绑定并生成分析结果。当然，在预制的统计项目中，也需要预制一些针对性的分析方案以供基础用户直接查看而不需要自己配置也不需要有相关知识。
5. 其他：数据统计及数据分析需要相关的理论知识，这最好在相关位置给出帮助选项来允许用户快速了解对应模块的用法，这将提高整体用户的专业性。对于数据的收录及导出，将允许用户以特定格式进行批量导入/导出。对于统计/分析也需要提供分享功能。
6. 更多功能：基础功能实现并且稳定运行后，其他目标可能为云端数据、跨平台（安卓、PC、Mac、Web）、多人协作数据处理分析（将允许别人查看你的数据，并进行分析然后给出建议）、统计库（允许用户将自己的自定义统计项目上传到统计库供其他用户下载，当然肯定是需要审核的）、外部合作。

## 2. 常见统计类型分析

### 2.1. 跑步

跑步在日常生活中非常常见，很多人都使用各种 App 来记录自己的跑步数据。

|统计项|项目类型|记录方式|分析|结论|其他|
|:----:|:----:|:----:|:----:|:---:|:---:|
|时间|时间段|选择开始结束时间|提供控件选择|可记录|/|
|距离|长度值|手动输入|输入框输入|可记录|/|
|位置|经纬度|获取手机定位|获取位置权限|可记录，但意义不大|/|
|路线|经纬度数组|持续记录手机定位|获取位置权限并持续记录|可记录，但意义不大|/|
|配速|速度值|手机陀螺仪计算速度|直接自动记录或用户手动输入|可记录|/|
|心率|次数值|手表辅助测量|用户手动输入或从系统的健康中导入|可记录|/|

跑步常用的图表有：

1. 折线图记录每个月/周/年跑步次数
2. 折线图记录每个月/周/年跑步总里程数
3. 折线图记录每个月/周/年跑步最大里程数
4. 折线图记录每个月/周/年最大配速
5. 搭配 1-4 显示最大/平均心率

跑步可用的分析有：

1. 根据月/周里程、配速、心率来分析进步情况，需要提高的情况。
2. 根据月/周里程来预测未来的进步曲线

### 2.2 健身

日常健身中，科学的进行训练非常重要，使用数据记录自己的训练可以看出自己是否有增长以及未来可能遇到的瓶颈。

|统计项|项目类型|记录方式|分析|结论|其他|
|:----:|:----:|:----:|:----:|:---:|:---:|
|时间/时长|时间点/时间段|选择时间/选择开始结束时间|提供控件选择|可记录|/|
|动作|文本/分类|手动输入/选择|输入框/选择|可记录|/|
|部位|文本/分类|手动输入/选择|输入框/选择|可记录|/|
|次数|计数|手动输入/选择|输入框/选择控件|可记录|/|
|重量|重量值|手动输入|输入框|可记录|/|

健身常用的图表有：

1. 折线图记录每个月/周/年的训练次数
2. 直方图对比每个训练动作/部位的训练次数
3. 折线图记录每个训练动作/部位的每月/周/年总负重
4. 折线图记录每个训练动作/部位的每月/周/年最大负重
5. 折线图记录每个训练动作的每月/周/年 1RM 值

健身可用的分析有：

1. 根据最大负重来预测未来的增长曲线
2. 根据 1RM 值来预测未来的增长曲线

### 2.3 时间使用

会有很多学生和喜好数据记录的人希望记录他的每日时间使用

|统计项|项目类型|记录方式|分析|结论|其他|
|:----:|:----:|:----:|:----:|:---:|:---:|
|时长|时间段|选择开始结束时间|提供控件选择|可记录|/|
|事件|文本/分类|手动输入/选择|输入框/选择|可记录|/|

时间使用常用的图表有：

1. 扇形图记录各个事件的在某一段时间内的总时间占比
2. 折线图记录每个事件在一段时间内的变化

时间使用可用的分析有：

1. 根据折线图预测某个事件未来一段时间的变化

### 2.4 账本

记账也是热门记录内容

|统计项|项目类型|记录方式|分析|结论|其他|
|:----:|:----:|:----:|:----:|:---:|:---:|
|时间|时间点|选择时间|提供控件选择|可记录|/|
|分类|文本/分类|手动输入/选择|输入框/选择|可记录|/|
|类型|分类（支出/收入）|选择|选择|可记录|/|
|数量|钱数|手动输入|输入框/选择|可记录|/|
|存款|钱数|根据每次记录自动计算|输入框修改|可记录|/|

账本常用的图表有：

1. 折线图记录存款变化
2. 折线图记录每月/周/年的支出
3. 折线图记录每月/周/年的收入
4. 扇形图记录每个分类的支出
5. 扇形图记录每个分类的收入
6. 扇形图对比支出和收入占比

账本可用的分析有：

1. 预测未来一段时间的存款数变化
2. 预测未来一段时间的支出变化
3. 预测未来一段时间的收入变化

### 2.5 其他

在以上特例外，其他的记录都是简单的项目+时间+数量/时间/计数的记录模式

### 2.6 整体分析

经过分析常见项目，在进行一个统计项目的时候，可能遇到的统计项类型有：

|类型|记录方式|搭配功能|其他设想|
|:----:|:----:|:----:|:---:|
|文本|输入框|自动填充|可以考虑支持单行/多行文本，多行文本可以考虑插入图片，像写日记一样的编辑器|
|时间|Picker 滚轮|显示规则可自定义|期望可以有更容易的选择方式|
|时间段|Picker 滚轮|显示规则可自定义|期望可以有更容易的选择方式|
|分类|Picker/菜单选择|分类库，导入分类|期望有更容易的选择和生成方式|
|计数|输入框/特有控件|左滑+ 右滑-，单位自定义|/|
|数量|输入框|自定义键盘，单位自定义|可设定为自动变换值，根据某个分类和某个值来进行对应的四则运算，当然也能自己修改|
|定位|选择框，选择后将自动定位|/|/|

统计项中，计数、数量都需要一个搭配的功能：单位。这里需要考虑，用户可以自己选一些系统预设单位，也可以自己输入创建一个单位。

在单位设定中，有一个比较关键的关系就是进制，比如 mg - g - kg，mm - cm - m - km，在单位选定后，将提供一个 UI 来供用户生成单位关联，在单位需要进位的时候自动进行进位。

在图表方面，折线图、直方图、扇形图，都是常用的图表，还可以提供各种各样冷门的图表供用户选择，选择后，图表的各项属性，例如 x 轴 y 轴，数据来源等都可以自己选择。当然在预设项目中也会提供一些预设图表来供用户自己分析。

在分析方面，一般的数据变化分析模式为：观察数据曲线，找到类似曲线公式，使用线性回归+损失函数来实现深度学习模型，随机梯度下降算法来优化深度学习模型，从而计算出公式的常量，生成预测曲线，即可完成预测。基础的 AI 用法在 iOS 中也是可以使用的，并且并不占用多少内存与 CPU，一般在正常的数据量下，深度学习进行一百次以内的计算就可以给出稳定的结果。分析方面还有一个关键的概念是数据筛选，筛选出合适的数据，这个可以考虑自动或让用户手动来进行数据筛选，这部分的内容涉及的比较专业，可能并不适合让用户自己来进行选择，可以再多加研究考虑如何更好的实现。

## 3. App 设计

### 3.1 记录模块

记录模块分为几大部分：

1. 创建统计项：创建统计项类似习惯类应用，先输入名字，选择主题色，选择 icon，下一步就进入项目添加，可以自己选择，并随时预览最终的结果。
2. 统计项列表（首页）：首页将显示正在进行中的统计项并提供一些简单信息，例如上次记录时间，简单的数量折线图等
3. 统计项的单次记录：正常单次记录将是一个根据统计项目而生成的记录页面，当时创建了什么项目，什么类型，就需要用户去输入/选择。
4. 统计项快速记录：在某些统计项中，多次记录可能区别不大甚至一致，可以考虑提供一个记录历史的页面，让用户快速根据旧的记录进行重复记录为新的记录。

### 3.2 统计模块

统计模块分为几大部分：

1. 整体统计页面：整体统计页面将显示一些简单的统计数据，例如日历，汇总数据列表，简单折线图，以及统计积分页面的入口。
2. 统计细分页面：日历、汇总数据、图表都将有细分页面，用户可以根据需要进行数据筛选并查看图表。
3. 分析入口

### 3.3 分析模块：

分析模块分为几部分：

1. 已创建的分析方案列表
2. 分析结果页
3. 分析方案库

***待补充***